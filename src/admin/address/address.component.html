<div>
  <h1>Addresses</h1>
  <button (click)="toggleAddAddressForm()">Add Address</button>

  <div *ngIf="showAddAddressForm">
    <h2>Add New Address</h2>
    <form (ngSubmit)="addAddress()">
      <label>Street:</label>
      <input [(ngModel)]="newAddress.street" name="street" required>
      <label>City:</label>
      <input [(ngModel)]="newAddress.city" name="city" required>
      <label>State:</label>
      <input [(ngModel)]="newAddress.state" name="state" required>
      <label>Zip Code:</label>
      <input [(ngModel)]="newAddress.zipCode" name="zipCode" required>
      <button type="submit">Add Address</button>
    </form>
  </div>

  <div *ngIf="errorMessage">{{ errorMessage }}</div>

  <div>
    <label for="filterType">Filter By:</label>
    <select id="filterType" [(ngModel)]="filterType" name="filterType" (change)="getAddresses()">
      <option value="getAll">All</option>
      <option value="getById">ID</option>
      <option value="getByCity">City</option>
      <option value="getByState">State</option>
    </select>
    <input *ngIf="filterType !== 'getAll'" [(ngModel)]="filterValue" name="filterValue" placeholder="Enter value" (input)="getAddresses()">
  </div>

  <ul>
    <li *ngFor="let address of addresses; let i = index">
      <div *ngIf="editAddressIndex !== i">
        <span><strong>Street:</strong> {{ address.street }}</span><br>
        <span><strong>City:</strong> {{ address.city }}</span><br>
        <span><strong>State:</strong> {{ address.state }}</span><br>
        <span><strong>Zip Code:</strong> {{ address.zipCode }}</span><br>
        <button (click)="editAddress(i)">Edit</button>
      </div>
      <div *ngIf="editAddressIndex === i">
        <label>Street:</label>
        <input [(ngModel)]="address.street" name="street" required>
        <label>City:</label>
        <input [(ngModel)]="address.city" name="city" required>
        <label>State:</label>
        <input [(ngModel)]="address.state" name="state" required>
        <label>Zip Code:</label>
        <input [(ngModel)]="address.zipCode" name="zipCode" required>
        <button (click)="saveAddress(i)">Save</button>
        <button (click)="cancelEdit()">Cancel</button>
      </div>
    </li>
  </ul>
</div>